<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Rhythm Jump</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
        #ui-container { position: absolute; top: 10px; color: white; text-align: center; z-index: 10; }
        input { padding: 8px; border-radius: 5px; border: none; width: 250px; }
        button { padding: 8px 15px; background: #00f2ff; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div id="ui-container">
        <input type="text" id="yt-link" placeholder="Pune link-ul YouTube aici...">
        <button onclick="startGame()">LET'S ROCK!</button>
        <p>Apasă <b>SPACE</b> sau <b>Click</b> pentru a sări</p>
    </div>

    <script>
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            backgroundColor: '#050510',
            physics: {
                default: 'arcade',
                arcade: { gravity: { y: 1200 }, debug: false }
            },
            scene: { preload: preload, create: create, update: update }
        };

        let player;
        let cursors;
        let obstacles;
        let spawnTimer = 0;
        const game = new Phaser.Game(config);

        function preload() {
            // Generăm texturi simple direct în cod pentru a nu avea nevoie de imagini externe la început
            let graphics = this.make.graphics({x: 0, y: 0, add: false});
            
            // Jucătorul (Cub Neon)
            graphics.lineStyle(4, 0x00f2ff);
            graphics.strokeRect(0, 0, 40, 40);
            graphics.generateTexture('player', 40, 40);
            graphics.clear();

            // Obstacol (Triunghi/Ghimpe)
            graphics.lineStyle(4, 0xff007f);
            graphics.strokeTriangle(0, 40, 20, 0, 40, 40);
            graphics.generateTexture('obstacle', 40, 40);
        }

        function create() {
            // Podeaua neon
            let floor = this.add.grid(400, 580, 800, 40, 40, 40, 0x00f2ff, 0.2, 0x00f2ff, 0.5);
            this.physics.add.existing(floor, true);

            // Jucătorul
            player = this.physics.add.sprite(150, 450, 'player');
            player.setCollideWorldBounds(true);

            // Grupul de obstacole
            obstacles = this.physics.add.group();

            // Coliziuni
            this.physics.add.collider(player, floor);
            this.physics.add.collider(player, obstacles, hitObstacle, null, this);

            // Controale
            cursors = this.input.keyboard.createCursorKeys();
            this.input.on('pointerdown', jump);
        }

        function update(time, delta) {
            if (cursors.space.isDown) {
                jump();
            }

            // Generare obstacole (simulăm ritmul)
            spawnTimer += delta;
            if (spawnTimer > 1500) { // Generează un ghimpe la fiecare 1.5 secunde
                createObstacle();
                spawnTimer = 0;
            }

            // Curățare obstacole care au ieșit din ecran
            obstacles.children.iterate(function (child) {
                if (child && child.x < -50) {
                    child.destroy();
                }
            });
        }

        function jump() {
            if (player.body.touching.down) {
                player.setVelocityY(-500);
            }
        }

        function createObstacle() {
            let obs = obstacles.create(850, 540, 'obstacle');
            obs.setVelocityX(-300); // Viteza cu care vin spre tine
            obs.body.allowGravity = false;
        }

        function hitObstacle(player, obstacle) {
            this.physics.pause();
            player.setTint(0xff0000);
            alert("Game Over! Apasă Refresh pentru a reîncepe.");
            location.reload();
        }

        function startGame() {
            const link = document.getElementById('yt-link').value;
            if(link) {
                console.log("Se încarcă muzica de la: " + link);
                // Aici vei integra YouTube API în pasul următor
            }
        }
    </script>
</body>
</html>
