<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PureStream - No Ads</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        #search-box { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border-radius: 5px; border: none; }
        button { padding: 12px 20px; cursor: pointer; background: #ff0000; color: white; border: none; border-radius: 5px; }
        .video-card { display: flex; gap: 15px; margin-bottom: 15px; background: #1e1e1e; padding: 10px; border-radius: 8px; cursor: pointer; }
        .video-card img { width: 120px; border-radius: 5px; }
        #player-container { position: sticky; top: 0; background: #121212; padding-bottom: 20px; display: none; }
        video { width: 100%; border-radius: 10px; background: #000; }
    </style>
</head>
<body>

<div class="container">
    <h2>PureStream</h2>
    
    <div id="player-container">
        <video id="main-player" controls playsinline autocomplete="off"></video>
        <h3 id="playing-title"></h3>
    </div>

    <div id="search-box">
        <input type="text" id="query" placeholder="Search for songs or videos...">
        <button onclick="search()">Search</button>
    </div>

    <div id="results"></div>
</div>

<script>
    const instance = "https://invidious.nerdvpn.de"; // Public Invidious Instance

    async function search() {
        const query = document.getElementById('query').value;
        const response = await fetch(`${instance}/api/v1/search?q=${encodeURIComponent(query)}`);
        const data = await response.json();
        
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';

        data.forEach(video => {
            if (video.type === 'video') {
                const card = document.createElement('div');
                card.className = 'video-card';
                card.innerHTML = `
                    <img src="${video.videoThumbnails[0].url}">
                    <div>
                        <strong>${video.title}</strong>
                        <p style="font-size: 0.8em; color: #aaa;">${video.author}</p>
                    </div>
                `;
                card.onclick = () => playVideo(video.videoId, video.title);
                resultsDiv.appendChild(card);
            }
        });
    }

    function playVideo(id, title) {
        const playerContainer = document.getElementById('player-container');
        const player = document.getElementById('main-player');
        const titleLabel = document.getElementById('playing-title');

        playerContainer.style.display = 'block';
        titleLabel.innerText = title;
        
        // This points to the direct video stream provided by the instance
        player.src = `${instance}/latest_version?id=${id}&itag=18`; 
        player.play();
        
        window.scrollTo(0, 0);
    }
</script>

</body>
</html>

